name: CICDTest 單元測試 (.NET 10 on Windows)

# 每次 push 或 PR 到 master 分支時自動執行
on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  test:

    runs-on: windows-latest  # 使用 Windows runner

    steps:
    # 1. 取得原始碼
    - name: 取得原始碼
      uses: actions/checkout@v4

    # 2. 安裝 .NET 10 SDK
    - name: 安裝 .NET 10
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: 10.0.x

    # 3. 還原 NuGet 套件
    - name: 還原套件
      run: dotnet restore CICDTest.sln

    # 4. 建置專案（不執行測試）
    - name: 建置專案
      run: dotnet build CICDTest.sln --no-restore --configuration Release

    # 5. 執行單元測試
    - name: 執行單元測試
      run: dotnet test CICDTest.Tests/CICDTest.Tests.csproj --no-build --verbosity normal
